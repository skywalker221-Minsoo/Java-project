<%@ page import="com.mega.project.CPUDAO"%>
<%@ page import="com.mega.project.CPUVO"%>
<%@ page import="com.mega.project.GraphicDAO"%>
<%@ page import="com.mega.project.GraphicVO"%>
<%@ page import="com.mega.project.MemoryDAO"%>
<%@ page import="com.mega.project.MemoryVO"%>
<%@ page import="com.mega.project.MainBoardDAO"%>
<%@ page import="com.mega.project.MainBoardVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%
	//HttpServletRequest request2 = new HttpServletRequest();
	session.getAttribute("id");
	String id = (String)session.getAttribute("id");
%>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="resources/css/main_exterior.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<!-- <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css"> -->
<style>
.center{ /* 사이트 이름 가운데 정렬, .클래스명 : 'center' 이름을 가진 클래스 적용 */
	text-align: center; 
	font-size: 50px;
}

#top3 {
	width: 230px;
	height: 400px;
	background: gray;
	color: white;
	top: 5px;
	right: 0px;
	position: fixed; /* 위치 고정s. 다른 내용이 움직여도 모니터 내 위치 고정 */
	border-radius: 0px 0px 50px 30px; /* 장바구니 모서리 둥근정도 설정 */
}

#feedback { font-size: 1em; }
  #selectable .ui-selecting { background: #FECA40; }
  #selectable .ui-selected { background: #F39814; color: white; }
  #selectable { list-style-type: none; margin: 0; padding: 0; width: 100%; }
  #selectable li { margin: 0px; padding: 0.4em; font-size: 1em; height: 18px; }
</style>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!-- <script type="text/javascript" src="resources/js/jquery-3.6.0.js"></script> -->
<script type="text/javascript">
var totalData = 20;
var dataPerPage = 5;
var pageCount = 4;

function paging(totalData, dataPerPage, pageCount, currentPage) {
	
	console.log("currentPage : " + currentPage);
	
	var totalPage = Math.ceil(totalData/dataPerPage);
	var pageGroup = Math.ceil(currentPage/pageCount);
	
	console.log("pageGroup : " + pageGroup);
	
	var last = pageGroup * pageCount;
	if (last > totalPage)
		last = totalPage;
	var next = last + 1;
	var first = last - (pageCount - 1);
	var prev = first - 1;
	
	console.log("last : " + last);
	console.log("first : " + first);
	console.log("next : " + next);
	console.log("prev : " + prev);
	
	var $pingingView = $("#paging");
	var html = "";
	
	if (prev > 0)
		html += "<a href=# id='prev'><</a> ";
		
	for (var i = first; i <= last; i++) {
		html += "<a href='#' id=" + i + ">" + i + "</a> ";
	}
	
	if (last < totalPage)
		html += "<a href=# id='next'>></a>";
		

		
	$("#paging").html(html);
	$("#paging a").css("color", "white");
	$("#paging a#" + currentPage).css({"text-decoration":"none",
									   "color":"yellow",
									   "font-weight":"bold"});
	
	$("#paging a").click(function() {
		
		var $item = $(this);
		var $id = $item.attr("id");
		var selectedPage = $item.text();
		
		if($id == "next")	selectPage = next;
		if($id == "prev")	selectPage = prev;
		
		$.ajax({
			url: "cpu",
			data: {
				id: selectedPage
			},
			success: function(result) { //result : url에서 받아온 값
				//alert('json연결 성공!')
				
				$(result).each(function() {
					$('#div').empty()
					$('#ui-widget-content').html(result)
					$('#document').html(result)
				})
			},
			error: function() {
				alert('all3연결 실패!')
			}           		
		})
		
		paging(totalData, dataPerPage, pageCount, selectedPage);
	})
}

$("document").ready(function() {
	paging(totalData, dataPerPage, pageCount, 1);
});

$(function() {
    $( "#selectable" ).selectable();
    
});

$(function() {
	//num3 = "";
	$('#b1').click(function() {
		$.ajax({
			url: "cpu_button",
			success: function(result) {
				$('#div').empty()
				$('#ui-widget-content').html(result)
			},
			error: function() {
				alert('연결 실패.')	
			}
		})
	})
	
	$('#b2').click(function() {
		$.ajax({
			url: "memory_button",
			success: function(result) {
				$('#div').empty()
				$('#ui-widget-content').html(result)
			},
			error: function() {
				alert('연결 실패.')	
			}
		})
	})
	
	$('#b3').click(function() {
		$.ajax({
			url: "mainboard_button",
			success: function(result) {
				$('#div').empty()
				$('#ui-widget-content').html(result)
			},
			error: function() {
				alert('연결 실패.')	
			}
		})
	})
	
	$('#b4').click(function() {
		$.ajax({
			url: "graphic_button",
			success: function(result) {
				$('#div').empty()
				$('#ui-widget-content').html(result)
			},
			error: function() {
				alert('연결 실패.')	
			}
		})
	})
	
	$('#b5').click(function() {
		$.ajax({
			url: "random",
			success: function(result) {
				$('#div').empty()
				$('#ui-widget-recommand').html(result)
			},
			error: function() {
				alert('연결 실패.')	
			}
		})
	})
})

</script>

</head>
<body>
	<div id="total">
		<div id="top">
			<!-- 사이트 이름 및 검색 탭 -->
			<jsp:include page="top.jsp"></jsp:include>
		</div>
		<div id="top2">
			<!-- 영화 선택 탭 -->
			<jsp:include page="top2.jsp"></jsp:include>
		</div>
 		<div id="top3">
			<!-- 개인정보 및 고객센터 탭 -->
			<jsp:include page="top3.jsp"></jsp:include>
		</div>
		
		<ul>
			<li style="background: green; margin:0 0 0 100px">
				<div class="left" style="border:solid 5px #333333; width: 600px; height: 2000px">
					<dl class="group_1_list">
						<ol id="selectable">
							<li id="ui-widget-recommand">
								<font size="30" color="brown">PC 추천</font>
							</li>
						</ol>
					</dl>
				</div>	
			</li>
		</ul>
		
		<ul>
			<li style="background: red; margin:0 auto">
				<div class="middle" style="border:solid 5px #333333; width: 600px; height: 2000px">
					<dl class="group_0_list">
						<ol id="selectable">
							<li id="ui-widget-content"><br><br>
								<c:forEach var="vo" items="${list_CPU}">
								<img src="${vo.img}"><br><br>
								${vo.subject}/${vo.company}/<br>
								${vo.indate}/${vo.sort}/${vo.socket}/${vo.generation}/<br>
								${vo.birth}/${vo.chipline}/${vo.pcie}/${vo.maxpcie}/${vo.fee}원<br><br>
								<a href=".jsp" class="w3-button w3-black w3-round-xlarge">장바구니</a>
								<a href=".jsp" class="w3-button w3-black w3-round-xlarge">상세페이지</a><hr color="green" width="500px"><br>
								</c:forEach>
							</li>
						</ol>
					</dl>
					<div id="paging"></div>
				</div>
			</li>
		</ul>
		
		<ul>
			<li style="background: blue; margin:0 auto">
				<div class="right" style="border:solid 5px #333333; width: 300px; height: 2000px">
					<dl class="group_1_list">
						<ol id="selectable">
							<li id="ui-widget-button">
								<button id="b1" class="w3-button w3-black w3-round-xlarge" style="float:center;">CPU</button><br><br><br>
								<button id="b2" class="w3-button w3-black w3-round-xlarge" style="float:center;">메모리</button><br><br><br>
								<button id="b3" class="w3-button w3-black w3-round-xlarge" style="float:center;">메인보드</button><br><br><br>
								<button id="b4" class="w3-button w3-black w3-round-xlarge" style="float:center;">그래픽카드</button><br><br><br>
								<button id="b5" class="w3-button w3-black w3-round-xlarge" style="float:center;">추천 클릭</button><br><br><br>
								<dd class="w3-container">
									<ul class="pd_item_list">총 합계 : ${sum2}</ul><br>
									<button id="b6" class="w3-button w3-black w3-round-xlarge" style="float:right;">결제</button><br><br><br>
								</dd>
							</li>
						</ol>
					</dl>
				</div>	
			</li>
		</ul>
	</div>
</body>
</html>